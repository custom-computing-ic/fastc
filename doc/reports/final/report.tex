\documentclass[a4paper, 11]{report}
\usepackage{amssymb,amsmath}
\usepackage{url}
\usepackage[final]{listings}
\usepackage{verbatim}
\usepackage{fixme}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage{layout}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{pgfplots}
\usepackage{array}
\usepackage{mdwmath}
\usepackage{mdwtab}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{geometry}
\usepackage{rotating}
\usepackage{pbox}
\usepackage{pdflscape}
\usepackage{tabularx}
%\usepackage{pstricks}
\usepackage{parskip}
\usepackage{algpseudocode}
\usepackage{algorithm}

\parskip 8pt

\usepackage{hyperref}
\hypersetup{
    colorlinks=false,
    pdfborder={0 0 0},
}


\usepackage{cleveref}
\listfiles

\graphicspath{{figs/}}
\setlength{\headheight}{15pt}

\definecolor{UniBlue}{RGB}{83,121,190}

\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{ \markboth{#1}{} }
%\renewcommand{\sectionmark}[1]{ \markright{#1}{} }

%\fancyhf{}
\fancyhead[LE,RO]{\color{UniBlue}\thepage}
\fancyhead[RE]{\color{UniBlue}\nouppercase{\leftmark} }
\fancyhead[LO]{\color{UniBlue}\nouppercase{\rightmark} }

\fancypagestyle{plain}{ %
%  \fancyhf{} % remove everything
%  \renewcommand{\headrulewidth}{0pt} % remove lines as well
%  \renewcommand{\footrulewidth}{0pt}
}

% --- Commands ---
\newcommand{\HRule}{\rule{\linewidth}{0.2mm}}
\newcommand{\mailto}[1]{\href{mailto:#1}{\texttt{#1}}}
\newcommand{\XXX}[1]{{\bf \color{red} XXX: #1}}
\newcommand{\TODO}[0]{{\bf \color{red} TODO\ }}
\newcommand{\FAST}[0]{FAST}
\newcommand{\fastc}[0]{\texttt{fastc}}
\newcommand\reduline{\bgroup\markoverwith
  {\textcolor{red}{\rule[-0.5ex]{2pt}{0.4pt}}}\ULon}
\newcommand{\FIC}[1]{\reduline{#1}}
\newcommand{\blt}{\raise .2ex\hbox{\tiny$\bullet$ }}
\newcommand\acknowledgements[1]{
  \typeout{Acknowledgements}
  \thispagestyle{plain}
  \begin{center}{\huge{Acknowledgements} \par}\end{center}
      {\normalsize #1}
      \vfil\vfil\null
}
\newcommand\myabstract[1]{
  \typeout{Abstract}
  \thispagestyle{plain}
  \vspace{-3cm}
  \begin{center}{\huge{Abstract} \par}\end{center}
      {\normalsize #1}
      \vfil\vfil\null
}

\titleformat{\chapter}{\normalfont\Huge\bfseries\color{UniBlue}}{\thechapter}{1em}{}
\titleformat{\section}{\normalfont\Large\bfseries\color{UniBlue}}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\large\bfseries\color{UniBlue}}{\thesubsection}{1em}{}


%\titlespacing*{\chapter}{0pt}{0pt}{10pt}

\newcounter{nodemarkers}
\newcommand\marktext[1]{%
  \tikz[overlay,remember picture]
  \node (marker-\arabic{nodemarkers}-a) at (0,1.5ex) {};%
  #1%
  \tikz[overlay,remember picture]
  \node (marker-\arabic{nodemarkers}-b) at (0,0){};%
  \tikz[overlay,remember picture,inner sep=2pt]
  \node[draw,dotted,rectangle,fit=(marker-\arabic{nodemarkers}-a.center) (marker-\arabic{nodemarkers}-b.center)] {};%
  \stepcounter{nodemarkers}%
}

% --- S ---

\usetikzlibrary{shapes,arrows,fit}
\usetikzlibrary{positioning}

% ---- Listings ----
\lstdefinestyle{lara}{ language=C++,
  morekeywords={aspectdef, var, apply, select, condition, begin, end, input}}

\lstdefinestyle{MaxC}{language=C++,
  morekeywords={s_int32, int32, float8_24, sin_float8_24,
    sout_float8_24, float8_24, s_int, s_float8_24, s_bool, in, out, count, countChain},
  deletekeywords={static}}

\lstdefinestyle{MaxJ}{
  morekeywords={HWVar, io, hwFloat, stream}
}


\lstset{aboveskip=20pt,
  belowskip=20pt,
  basicstyle=\small\sffamily,
  rulecolor=\color{lightgray},
  frame=single,
  frameround=tttt,
  keywordstyle=\color{black}\bfseries,
  numbers=left,
  numberstyle={\color{UniBlue}\scriptsize},
  captionpos=b,
  breaklines=true,
  xleftmargin=2em,
  escapeinside={(*@}{@*)}
}

\pgfplotsset{
  width=0.9\textwidth,
  enlargelimits=0.1,
  compat=1.8,
  tick label style={font=\footnotesize},
  label style={font=\footnotesize},
  legend style={font=\scriptsize},
  axis line style={lightgray},
}


\begin{document}

\input{sections/titlepage.tex}

\renewcommand{\thepage}{\roman{page}}


\begin{abstract}
  \vspace{1em} Dataflow designs implemented on custom streaming
  architectures can be orders of magnitudes more efficient than
  traditional software, but they are developed with reduced
  productivity.  We propose a novel design flow for generating
  dataflow designs based on Aspect-oriented programming and explain
  how the proposed approach can be used to decouple design
  optimisation from design specification by encapsulating
  optimisations in separate aspect descriptions, which leads to
  improved productivity and efficiency. To support this approach we
  introduce a novel dataflow language that facilitates integration
  with existing aspect weaving tools and simplifies design development
  by supporting embedded hardware/software co-design, flexible number
  representation and run-time reconfiguration. We introduce novel
  aspect descriptions that specify system-level and implementation
  level optimisations strategies as well as strategies for improving
  developer productivity. We evaluate our approach on a number of
  applications, including advanced high-performance applications, such
  as the Reverse Time Migration technique for seismic imaging, and
  show that efficient dataflow designs up to 100 times faster than
  equivalent software only implementations can be derived with
  improved productivity.
\end{abstract}


\acknowledgements{

  I would like to thank:
\begin{itemize}
\item Professor Wayne Luk, for providing the inspiration for this
  project and guidance throughout
  \item Dr. Jose Gabriel Coutinho, for invaluable feedback and
    suggestions and including this work in the HARNESS project and
    providing the original source code for the Add Predictor kernel
  \item Xinyu Niu, for providing the original source code and
    background on the Reverse Time Migration and Black Scholes
    applications
  \item Dr. Timothy Todman and Dr. Stephen Weston, for providing
    constructive suggestions regarding the evaluation process
  \item Maxeler Technologies, especially Jacob Bower and Oliver Pell
    for their constructive suggestions on improving our paper and
    approach
  \item the anonymous reviewers of our paper for some interesting
    suggestions regarding future work
  \item my family and friends for their continuous support
\end{itemize}

}

\clearpage

\tableofcontents
\listoffigures
\listoftables
\lstlistoflistings

\pgfplotsset{width=0.7\textwidth, enlargelimits=0.15}

\renewcommand{\arraystretch}{1.5}

\input{sections/intro.tex}
\input{sections/background.tex}
\input{sections/design_flow.tex}
\input{sections/fast.tex}
\input{sections/aspects.tex}
\input{sections/eval.tex}
\input{sections/conclusion.tex}


% some spacing
\newcommand{\BIBdecl}{\setlength{\itemsep}{0.4 em}}

\bibliographystyle{IEEEtran}
\bibliography{../../refdb/bibliography.bib}

\clearpage
\appendix

\input{sections/installation.tex}
\input{sections/RTM-original.tex}
\input{sections/MEM-original.tex}
\input{sections/SG-fast.tex}
\input{sections/bsort.tex}



\end{document}
